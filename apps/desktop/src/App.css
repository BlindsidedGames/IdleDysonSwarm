:root {
  color-scheme: dark;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: 16px;
  line-height: 24px;
  font-weight: 400;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  --ui-bg: #0f0b14;
  --ui-bg-glow: #2b203f;
  --ui-panel: rgba(30, 22, 38, 0.86);
  --ui-panel-strong: rgba(24, 18, 32, 0.9);
  --ui-panel-active: rgba(60, 45, 76, 0.95);
  --ui-panel-soft: rgba(58, 44, 68, 0.82);
  --ui-border: #4a3b58;
  --ui-border-soft: #3b2d4a;
  --ui-text: #f0e8f7;
  --ui-muted: #c8b7d6;
  --ui-muted-strong: #b9a7c9;
  --ui-accent: #d8c3e8;
  --ui-accent-strong: #f2a3e4;
  --ui-highlight: #f2a55e;
  --ui-success: #91dd8f;
  --ui-info: #7bb6ff;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: radial-gradient(1200px 600px at 20% 0%, var(--ui-bg-glow), var(--ui-bg));
  color: var(--ui-text);
}

input,
select,
textarea {
  accent-color: var(--ui-accent-strong);
}

.container {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 20px 24px 48px;
}

.layout {
  display: grid;
  grid-template-columns: minmax(180px, 220px) minmax(0, 1fr);
  gap: 16px;
  align-items: start;
}

.mainContent {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.topbar {
  display: flex;
  gap: 16px;
  align-items: flex-end;
  justify-content: space-between;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.brandTitle {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: 0.2px;
}

.brandSubtitle {
  font-size: 13px;
  color: var(--ui-muted);
}

.tabs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.tabsSide {
  flex-direction: column;
  align-items: stretch;
  position: sticky;
  top: 20px;
}

.tabsSide .tab {
  text-align: left;
}

.tab {
  cursor: pointer;
  border: 1px solid var(--ui-border);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--ui-panel-strong);
  color: var(--ui-muted);
}

.tab.active {
  border-color: var(--ui-accent);
  background: var(--ui-panel-active);
  color: var(--ui-text);
}

.hud {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 12px;
  margin-bottom: 16px;
}

.hudItem {
  border: 1px solid var(--ui-border);
  border-radius: 12px;
  background: var(--ui-panel);
  padding: 10px 12px;
}

.hudLabel {
  font-size: 12px;
  color: var(--ui-muted);
}

.hudValue {
  font-size: 18px;
  font-weight: 700;
}

.panelRow {
  display: flex;
  flex-direction: column;
  gap: 14px;
  align-items: stretch;
}

.panel {
  border: 1px solid var(--ui-border);
  border-radius: 14px;
  background: var(--ui-panel);
  overflow: hidden;
}

.panelHeader {
  padding: 12px 14px;
  border-bottom: 1px solid var(--ui-border);
}

.panelHeader h2 {
  margin: 0;
  font-size: 14px;
  color: var(--ui-text);
}

.segRow {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 12px 14px 0;
}

.seg {
  cursor: pointer;
  border: 1px solid var(--ui-border);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--ui-panel-strong);
  color: var(--ui-muted);
}

.seg.active {
  border-color: var(--ui-accent);
  background: var(--ui-panel-active);
  color: var(--ui-text);
}

.checkboxRow {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 12px 14px;
  color: var(--ui-text);
}

.debugRow {
  display: flex;
  gap: 10px;
  padding: 0 14px 14px;
  flex-wrap: wrap;
}

button {
  cursor: pointer;
  border: 1px solid var(--ui-border);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--ui-panel-strong);
  color: var(--ui-text);
}

button:hover {
  border-color: var(--ui-accent);
}

button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.list {
  display: flex;
  flex-direction: column;
}

.listRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 12px 14px;
  border-bottom: 1px solid var(--ui-border-soft);
  background: rgba(35, 26, 48, 0.55);
}

.listRow:last-child {
  border-bottom: 0;
}

.listTitle {
  font-weight: 700;
  margin-bottom: 2px;
}

.listMeta {
  font-size: 12px;
  color: var(--ui-muted);
}

.listActions {
  display: flex;
  gap: 10px;
  align-items: center;
}

.cost {
  font-variant-numeric: tabular-nums;
  color: var(--ui-accent);
}

.placeholder {
  padding: 12px 14px;
  color: var(--ui-muted);
}

.placeholderErrorDetails {
  margin-top: 8px;
  white-space: pre-wrap;
  word-break: break-word;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  color: #f2b1b1;
}

.skillTreeRoot {
  display: flex;
  flex-direction: column;
}

.skillTreeTopBar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  border-bottom: 1px solid var(--ui-border-soft);
}

.skillTreeTopBarStats {
  font-size: 12px;
  color: var(--ui-muted);
}

.skillTreeTopBarStats strong {
  color: var(--ui-text);
}

.skillTreeTopBarDivider {
  margin: 0 8px;
}

.skillTreeRoot {
  --skill-zoom: 1;
}

.skillTreeMain {
  display: grid;
  grid-template-columns: 1fr 340px;
  gap: 14px;
  padding: 12px 14px 14px;
  align-items: start;
}

.skillTreeViewport {
  border: 1px solid var(--ui-border-soft);
  border-radius: 12px;
  overflow: auto;
  background: radial-gradient(1200px 700px at 20% 0%, rgba(78, 52, 112, 0.65), rgba(16, 12, 22, 0.96));
  cursor: grab;
  overscroll-behavior: contain;
  touch-action: none;
  height: clamp(700px, 72vh, 920px);
}

.skillTreeViewport.dragging {
  cursor: grabbing;
}

.skillTreeCanvas {
  position: relative;
  min-width: 100%;
  min-height: 100%;
}

.skillTreeLines {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.skillTreeLine {
  stroke: rgba(10, 10, 10, 0.55);
  stroke-width: 2;
  stroke-dasharray: 6 6;
}

.skillTreeLine.shadow {
  stroke: rgba(10, 10, 10, 0.35);
  stroke-dasharray: 2 7;
}

.skillNode {
  position: absolute;
}

.skillNodeButton {
  width: calc(100px * var(--skill-zoom));
  height: calc(100px * var(--skill-zoom));
  border-radius: calc(14px * var(--skill-zoom));
  border: 1px solid rgba(0, 0, 0, 0.35);
  background: rgba(96, 62, 148, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
}

.skillNodeButton.root {
  background: rgba(62, 122, 132, 0.85);
}

.skillNodeButton.fragment {
  background: rgba(144, 64, 104, 0.85);
}

.skillNodeButton.exclusiveLocked {
  background: rgba(64, 64, 64, 0.7);
}

.skillNodeButton.owned {
  background: rgba(62, 134, 148, 0.95);
  border-color: rgba(163, 255, 254, 0.65);
}

.skillNodeButton.selected {
  outline: 2px solid var(--ui-accent-strong);
  outline-offset: 2px;
}

.skillNodeIcon {
  width: calc(56px * var(--skill-zoom));
  height: calc(56px * var(--skill-zoom));
  object-fit: contain;
  user-select: none;
  pointer-events: none;
}

.skillNodeLabel {
  margin-top: calc(6px * var(--skill-zoom));
  width: calc(100px * var(--skill-zoom));
  text-align: center;
  font-size: calc(11px * var(--skill-zoom));
  line-height: 1.15;
  color: var(--ui-text);
  opacity: 0.92;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
}

.skillTreeDetails {
  border: 1px solid var(--ui-border);
  border-radius: 12px;
  background: rgba(28, 20, 36, 0.8);
  overflow: hidden;
}

.skillTreeDetailsBody {
  padding: 12px 14px;
}

.skillTreeDetailsTitle {
  margin-bottom: 4px;
  font-weight: 700;
  color: var(--ui-text);
}

.skillTreeDetailsMeta {
  font-size: 12px;
  color: var(--ui-muted);
}

.skillTreeDetailsSectionTitle {
  margin-top: 12px;
  font-size: 12px;
  font-weight: 700;
  color: var(--ui-muted);
}

.skillTreeDetailsText {
  margin: 6px 0 0;
  white-space: pre-wrap;
  font-family: inherit;
  font-size: 12px;
  color: var(--ui-text);
  opacity: 0.9;
}

.tinkerCard {
  border: 1px solid var(--ui-border);
  border-radius: 12px;
  background: rgba(60, 44, 76, 0.9);
  padding: 14px;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
}

.tinkerTitle {
  font-weight: 700;
  color: var(--ui-text);
  margin-bottom: 4px;
}

.tinkerDescription {
  font-size: 12px;
  color: var(--ui-muted);
  line-height: 1.4;
  margin-bottom: 10px;
}

.tinkerHighlight {
  color: var(--ui-accent-strong);
  font-weight: 700;
}

.tinkerBar {
  position: relative;
  width: 100%;
  border-radius: 10px;
  height: 38px;
  min-height: 38px;
  padding: 0 12px;
  background: var(--ui-panel-strong);
  border: 1px solid var(--ui-border);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-size: 14px;
}

.tinkerBar:disabled {
  opacity: 1;
  cursor: default;
}

.tinkerBarFill {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 0;
  background: linear-gradient(90deg, rgba(216, 195, 232, 0.3), rgba(242, 163, 228, 0.55));
}

.tinkerBarLabel {
  position: relative;
  font-weight: 700;
  color: var(--ui-text);
  min-height: 16px;
}

.tinkerBarCounter {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-variant-numeric: tabular-nums;
  color: var(--ui-muted-strong);
}

.botsPanel {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px 14px 14px;
}

.botsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(340px, 100%), 1fr));
  gap: 12px;
}

.botsCard {
  border: 1px solid var(--ui-border);
  border-radius: 12px;
  background: var(--ui-panel-soft);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.2);
}

.botsCardHeader {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 12px;
  min-height: 22px;
  line-height: 1.1;
}

.botsCardTitleRow {
  display: flex;
  align-items: baseline;
  gap: 0;
  min-width: 0;
  white-space: nowrap;
}

.botsCardTitleText {
  font-weight: 700;
  color: var(--ui-text);
  white-space: nowrap;
  min-width: 0;
  flex: 0 0 auto;
  line-height: 1.1;
  margin-right: 0.35em;
}

.botsCardOwned {
  color: var(--ui-highlight);
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
  white-space: nowrap;
}

.botsCardOwnedManual {
  color: var(--ui-success);
  font-weight: 600;
  margin-left: 2px;
  white-space: nowrap;
}

.botsCardOwnedBonus {
  color: var(--ui-info);
  font-weight: 600;
}

.botsCardProductionRow {
  font-size: 12px;
  color: var(--ui-muted);
  text-align: right;
  white-space: nowrap;
  flex-shrink: 0;
  line-height: 1.1;
}

.botsCardProductionVerb {
  color: var(--ui-muted);
}

.botsCardProductionValue {
  color: var(--ui-accent-strong);
  font-weight: 700;
}

.botsCardProductionUnit {
  color: var(--ui-muted);
}

.botsCardProductionMuted {
  color: var(--ui-muted-strong);
}

.botsCardFooter {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 6px;
}

.botsCardDescription {
  font-size: 12px;
  color: var(--ui-muted);
  line-height: 1.35;
  flex: 1 1 auto;
  min-width: 0;
}

.botsCardButton {
  border-radius: 12px;
  border: 1px solid #9b86b0;
  background: var(--ui-accent);
  color: #2e2536;
  padding: 8px 14px;
  min-width: 120px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  flex-shrink: 0;
}

.botsCardButton:hover:not(:disabled) {
  border-color: #b199c5;
  background: #e3d1f1;
}

.botsCardButtonAmount {
  font-weight: 700;
  font-size: 14px;
}

.botsCardButtonCost {
  font-variant-numeric: tabular-nums;
  font-weight: 700;
  font-size: 14px;
}

@media (max-width: 1400px) {
  .hud {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (max-width: 1100px) {
  .hud {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 720px) {
  .hud {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 1280px) {
  .layout {
    grid-template-columns: 1fr;
  }

  .tabsSide {
    position: static;
    flex-direction: row;
    flex-wrap: wrap;
  }

  .tabsSide .tab {
    flex: 1 1 auto;
  }
}

@media (max-width: 720px) {
  .botsCardFooter {
    flex-direction: column;
    align-items: stretch;
  }

  .botsCardButton {
    width: 100%;
  }
}

@media (max-width: 1020px) {
  .skillTreeMain {
    grid-template-columns: 1fr;
  }
}
